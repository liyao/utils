(function($){    $.fn.rating = function(){        return this.each(function () {            var plugin = new Rating();            plugin.init(this);            return plugin.show();        });    };    function Rating(){        this.init = function(elem) {            this.elem = elem;        };        this.show = function(){            var $widget = $(this.elem),            $all = $widget.find('i'),            curValue;            $widget.on('ratingUpdate',function(){                var curValue = $('.cur').data('rating-value');                $('.cur').addClass('selected').prevAll()                    .addClass('selected');            });            $all.on('click', function(event){                var $a = $(this),                    value,                    text;                event.preventDefault();                value = $a.data('rating-value');                $widget.data('curValue', value);                $all.removeClass('active selected');                $a.addClass('selected').prevAll().addClass('selected');                if($a.hasClass('cur')){                    $a.removeClass('cur selected')                } else {                    $all.removeClass('cur');                    $a.addClass('cur');                }            });            $all.on(                'mouseenter',function(){                    $a = $(this);                    $all.removeClass('active').removeClass('selected');                    $a.addClass('active').prevAll().addClass('active');                }            );            $widget.on(                'mouseout',function(){                    $all.removeClass('active');                    $widget.trigger('ratingUpdate')                }            );        }    }})(jQuery);